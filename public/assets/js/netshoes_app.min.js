function removeClass(t,e){if(t.classList)t.classList.remove(e);else{var a=t.className;a.indexOf(e)>1&&(newClass=a.replace(e,""),t.className=newClass)}}function addClass(t,e){if(t.classList)t.classList.add(e);else{t.className.indexOf(e)<1&&(t.className+=" "+e)}}function fadeOut(t){window.requestAnimationFrame?(t.style.opacity=1,function e(){(t.style.opacity-=.1)<0?t.style.display="none":requestAnimationFrame(e)}()):t.style.display="none"}function fadeIn(t,e){window.requestAnimationFrame?(t.style.opacity=0,t.style.display=e||"block",function e(){var a=parseFloat(t.style.opacity);(a+=.1)>1||(t.style.opacity=a,requestAnimationFrame(e))}()):t.style.display=e||"block"}function priceFormat(t){return t="R$ <span>"+(t=(t=(t=t.toFixed(2)).toString()).split("."))[0]+"</span>,"+t[1]}function parcela(t,e){return"ou "+e+" x <span>R$ "+(t/e).toFixed(2).replace(".",",")+"</span>"}function supportLocalStorage(){return!!window.localStorage||(console.log("Sorry! The browser does not support localStorage..."),!1)}function setItemLocalStorage(t,e){supportLocalStorage()&&localStorage.setItem(t,JSON.stringify(e))}function getItemLocalStorage(t){if(supportLocalStorage())return JSON.parse(localStorage.getItem(t))}function removeItemLocalStorage(t){supportLocalStorage()&&(localStorage.removeItem(t),window.location=window.location)}function contadorCarrinhoItens(){var t=getItemLocalStorage("carrinho");if(t){for(var e=0,a=0;a<t.length;a++){e+=t[a].amount}return 0===e&&setTimeout(function(){removeItemLocalStorage("carrinho")},3e3),e}}function atualizarContantorItens(){for(var t=document.getElementsByClassName("carrinhoContador"),e=contadorCarrinhoItens()?contadorCarrinhoItens():0,a=0;a<t.length;a++){t[a].innerHTML=e}}var body=document.getElementsByTagName("body")[0],loader=document.createElement("div"),preloader={show:function(){loader.setAttribute("id","preloader"),addClass(body,"overflow"),body.appendChild(loader)},hide:function(){fadeOut(loader),removeClass(body,"overflow")}};!function(){var t={abrir:function(){addClass(e=document.getElementsByTagName("body")[0],"abrirCarrinho");var t=document.createElement("div");t.setAttribute("id","carrinhoOverlay"),e.appendChild(t),t.style.display="none",fadeIn(t)},total:function(t){var e=0;if(t)for(var a=0;a<t.length;a++){e+=t[a].subtotal}return e},conteudo:function(){var e=document.getElementById("carrinhoBody"),a=document.getElementById("carrinhoFooter"),r=document.getElementById("carrinhoMsg");if(0===t.total(getItemLocalStorage("carrinho")))e.style.display="none",a.style.display="none",r.style.display="block";else{e.style.display="block",a.style.display="block",r.style.display="none";document.getElementById("carrinhoTotal").innerHTML=priceFormat(t.total(getItemLocalStorage("carrinho")));document.getElementById("carrinhoParcelas").innerHTML=parcela(t.total(getItemLocalStorage("carrinho")),10)}},items:function(t){if(t){var e=document.getElementById("carrinhoItens");e.innerHTML="",t.forEach(function(t){var a=document.createElement("li");addClass(a,"carrinhoItem");var r='<button class="carrinhoRemoverItem" id="'+t.id+'"></button>\n<div class="carrinhoItemTexto">\n<span class="carrinhoItemDesc">'+t.title+" "+t.description+'</span>\n<div class="carrinhoItemInfo">\n<span class="carrinhoItemTamanho">'+t.size+'</span> | <span class="carrinhoItemEstilo">'+t.style+'</span>\n<div class="carrinhoItemQuantidade">Quantidade: '+t.amount+'</div>\n<div class="carrinhoItemPreco">'+priceFormat(t.subtotal)+'</div>\n</div>\n</div>\n<div class="carrinhoItemThumb">\n<img src="assets/imagens/produtos/produto'+t.id+'.jpg" alt="">\n</div>';a.innerHTML=r,e.appendChild(a)})}},remove:function(t,e,a){if(t.length>0)for(var r=0;r<t.length;r++)e===t[r].id&&t.splice(r,1);setItemLocalStorage(a,t)}};document.getElementById("btnAbrirCarrinho").addEventListener("click",function(){t.abrir(),t.conteudo(),t.items(getItemLocalStorage("carrinho"))});var e=document.getElementsByTagName("body")[0];e.addEventListener("click",function(t){var e=t.target;"carrinhoOverlay"===t.target.id&&(removeClass(this,"abrirCarrinho"),fadeOut(e),setTimeout(function(){e.remove()},2e3))});document.getElementById("carrinhoItens").addEventListener("click",function(e){var a=e.target,r=a.parentNode;"carrinhoRemoverItem"===a.className&&(fadeOut(r),setTimeout(function(){r.remove()},2e3),t.remove(getItemLocalStorage("carrinho"),parseInt(a.id),"carrinho"),atualizarContantorItens(),t.conteudo())})}(),atualizarContantorItens(),function(){var t=new XMLHttpRequest;t.open("GET","data/products.json"),t.addEventListener("load",function(){if(this.status>=200&&this.status<400){JSON.parse(this.responseText).products.forEach(function(t){!function(t){var e=document.getElementById("produtosLista"),a=document.createElement("li"),r=t.installments>0?'<div class="produtoParcelas">'+parcela(t.price,t.installments)+"</div>":"",o='<div>\n<a href="#" title="'+t.title+'"data-product-id="'+t.id+'"data-product-sku="'+t.sku+'"data-product-title="'+t.title+'"data-product-description="'+t.description+'"data-product-availableSizes="'+t.availableSizes+'"data-product-size="'+t.availableSizes[0]+'"data-product-style="'+t.style+'"data-product-price="'+t.price+'"data-product-installments="'+t.installments+'"data-product-currencyId="'+t.currencyId+'"data-product-currencyFormat="'+t.currencyFormat+'"data-product-isFreeShipping="'+t.isFreeShipping+'">\n<img src="assets/imagens/produtos/produto'+t.id+'.jpg" alt="'+t.title+'" class="produtoImg">\n</a>\n<div class="produtoInfo">\n<p class="produtoTitulo">'+t.title+'</p>\n<div class="produtoPreco">'+priceFormat(t.price)+"</div>\n"+r+"</div>\n</div>";a.setAttribute("class","produto col-md-4"),a.innerHTML=o,e.appendChild(a)}(t)})}else console.log("Erro "+this.status+": arquivo nÃ£o encontrado")}),t.addEventListener("error",function(t){console.log("Ocorreu um erro ao carregar os dados!")}),t.addEventListener("loadstart",function(t){preloader.show()}),t.addEventListener("loadend",function(t){preloader.hide()}),t.send()}(),function(){var t,e=getItemLocalStorage("carrinho");t=e||[];document.getElementById("produtosLista").addEventListener("click",function(e){if(e.preventDefault(),"IMG"===e.target.nodeName){var a,r=e.target.parentNode,o=parseInt(r.getAttribute("data-product-id")),n=parseInt(r.getAttribute("data-product-sku")),i=r.getAttribute("data-product-title"),s=r.getAttribute("data-product-description"),c=r.getAttribute("data-product-availableSizes"),d=r.getAttribute("data-product-size"),l=r.getAttribute("data-product-style"),u=parseFloat(r.getAttribute("data-product-price")),p=parseInt(r.getAttribute("data-product-installments")),m=r.getAttribute("data-product-currencyId"),g=r.getAttribute("data-product-currencyFormat"),v=r.getAttribute("data-product-isFreeShipping"),f=!1;if(t.length>0)for(var y=0;y<t.length;y++)o===t[y].id&&(f=!0,a=y);if(f){t[a].amount+=1;var h=t[a].amount*t[a].price;t[a].subtotal=parseFloat(h.toFixed(2))}else{var I={id:o,sku:n,title:i,description:s,availableSizes:c,size:d,style:l,price:u,installments:p,currencyId:m,currencyFormat:g,isFreeShipping:v,amount:1,subtotal:u};t.push(I)}setItemLocalStorage("carrinho",t),atualizarContantorItens()}})}();