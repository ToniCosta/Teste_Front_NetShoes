function removeClass(t,e){if(t.classList)t.classList.remove(e);else{var a=t.className;a.indexOf(e)>1&&(newClass=a.replace(e,""),t.className=newClass)}}function addClass(t,e){if(t.classList)t.classList.add(e);else{t.className.indexOf(e)<1&&(t.className+=" "+e)}}function fadeOut(t){window.requestAnimationFrame?(t.style.opacity=1,function e(){(t.style.opacity-=.1)<0?t.style.display="none":requestAnimationFrame(e)}()):t.style.display="none"}function fadeIn(t,e){window.requestAnimationFrame?(t.style.opacity=0,t.style.display=e||"block",function e(){var a=parseFloat(t.style.opacity);(a+=.1)>1||(t.style.opacity=a,requestAnimationFrame(e))}()):t.style.display=e||"block"}function priceFormat(t){return t="R$ <span>"+(t=(t=(t=t.toFixed(2)).toString()).split("."))[0]+"</span>,"+t[1]}function installment(t,e){return"ou "+e+" x <span>R$ "+(t/e).toFixed(2).replace(".",",")+"</span>"}function supportLocalStorage(){return!!window.localStorage||(console.log("Sorry! The browser does not support localStorage..."),!1)}function setItemLocalStorage(t,e){supportLocalStorage()&&localStorage.setItem(t,JSON.stringify(e))}function getItemLocalStorage(t){if(supportLocalStorage())return JSON.parse(localStorage.getItem(t))}function removeItemLocalStorage(t){supportLocalStorage()&&(localStorage.removeItem(t),window.location=window.location)}function contadorCarrinhoItens(){var t=getItemLocalStorage("carrinho");if(t){for(var e=0,a=0;a<t.length;a++){e+=t[a].amount}return 0===e&&setTimeout(function(){removeItemLocalStorage("carrinho")},3e3),e}}function atualizarContantorItens(){for(var t=document.getElementsByClassName("bag-contador"),e=contadorCarrinhoItens()?contadorCarrinhoItens():0,a=0;a<t.length;a++){t[a].innerHTML=e}}var body=document.getElementsByTagName("body")[0],loader=document.createElement("div"),preloader={show:function(){loader.setAttribute("id","preloader"),addClass(body,"overflow"),body.appendChild(loader)},hide:function(){fadeOut(loader),removeClass(body,"overflow")}};!function(){var t={abrir:function(){addClass(e=document.getElementsByTagName("body")[0],"open-bag");var t=document.createElement("div");t.setAttribute("id","bag-overlay"),e.appendChild(t),t.style.display="none",fadeIn(t)},total:function(t){var e=0;if(t)for(var a=0;a<t.length;a++){e+=t[a].subtotal}return e},conteudo:function(){var e=document.getElementById("bag-body"),a=document.getElementById("bag-footer"),n=document.getElementById("bag-msg");if(0===t.total(getItemLocalStorage("carrinho")))e.style.display="none",a.style.display="none",n.style.display="block";else{e.style.display="block",a.style.display="block",n.style.display="none";document.getElementById("bag-total").innerHTML=priceFormat(t.total(getItemLocalStorage("carrinho")));document.getElementById("bag-installments").innerHTML=installment(t.total(getItemLocalStorage("carrinho")),10)}},items:function(t){if(t){var e=document.getElementById("bag-items");e.innerHTML="",t.forEach(function(t){var a=document.createElement("li");addClass(a,"bag-item");var n='<button class="bag-item-remove" id="'+t.id+'"></button>\n<div class="bag-item-text">\n<span class="bag-item-desc">'+t.title+" "+t.description+'</span>\n<div class="bag-item-info">\n<span class="bag-item-size">'+t.size+'</span> | <span class="bag-item-style">'+t.style+'</span>\n<div class="bag-item-amount">Quantidade: '+t.amount+'</div>\n<div class="bag-item-price">'+priceFormat(t.subtotal)+'</div>\n</div>\n</div>\n<div class="bag-item-thumb">\n<img src="assets/images/products/'+t.id+'.jpg" alt="">\n</div>';a.innerHTML=n,e.appendChild(a)})}},remove:function(t,e,a){if(t.length>0)for(var n=0;n<t.length;n++)e===t[n].id&&t.splice(n,1);setItemLocalStorage(a,t)}};document.getElementById("btn-open-bag").addEventListener("click",function(){t.abrir(),t.conteudo(),t.items(getItemLocalStorage("carrinho"))});var e=document.getElementsByTagName("body")[0];e.addEventListener("click",function(t){var e=t.target;"bag-overlay"===t.target.id&&(removeClass(this,"open-bag"),fadeOut(e),setTimeout(function(){e.remove()},2e3))});document.getElementById("bag-items").addEventListener("click",function(e){e.target;var a=elem.parentNode;"bag-item-remove"===elem.className&&(fadeOut(a),setTimeout(function(){a.remove()},2e3),t.remove(getItemLocalStorage("carrinho"),parseInt(elem.id),"carrinho"),atualizarContantorItens(),t.conteudo())})}(),atualizarContantorItens(),function(){var t=new XMLHttpRequest;t.open("GET","data/products.json"),t.addEventListener("load",function(){if(this.status>=200&&this.status<400){JSON.parse(this.responseText).products.forEach(function(t){!function(t){var e=document.getElementById("product-list"),a=document.createElement("li"),n=t.installments>0?'<div class="product-installments">'+installment(t.price,t.installments)+"</div>":"",o='<figure>\n<a href="#" title="'+t.title+'"data-product-id="'+t.id+'"data-product-sku="'+t.sku+'"data-product-title="'+t.title+'"data-product-description="'+t.description+'"data-product-availableSizes="'+t.availableSizes+'"data-product-size="'+t.availableSizes[0]+'"data-product-style="'+t.style+'"data-product-price="'+t.price+'"data-product-installments="'+t.installments+'"data-product-currencyId="'+t.currencyId+'"data-product-currencyFormat="'+t.currencyFormat+'"data-product-isFreeShipping="'+t.isFreeShipping+'">\n<img src="assets/images/products/'+t.id+'.jpg" alt="'+t.title+'" class="product-img">\n</a>\n<div class="product-info">\n<p class="product-title">'+t.title+'</p>\n<div class="product-price">'+priceFormat(t.price)+"</div>\n"+n+"</div>\n</figure>";a.setAttribute("class","product col-md-4"),a.innerHTML=o,e.appendChild(a)}(t)})}else console.log("Erro "+this.status+": arquivo nÃ£o encontrado")}),t.addEventListener("error",function(t){console.log("Ocorreu um erro ao carregar os dados!")}),t.addEventListener("loadstart",function(t){preloader.show()}),t.addEventListener("loadend",function(t){preloader.hide()}),t.send()}(),function(){var t,e=getItemLocalStorage("carrinho");t=e||[];document.getElementById("product-list").addEventListener("click",function(e){if(e.preventDefault(),"IMG"===e.target.nodeName){var a,n=e.target.parentNode,o=parseInt(n.getAttribute("data-product-id")),r=parseInt(n.getAttribute("data-product-sku")),i=n.getAttribute("data-product-title"),s=n.getAttribute("data-product-description"),l=n.getAttribute("data-product-availableSizes"),d=n.getAttribute("data-product-size"),c=n.getAttribute("data-product-style"),u=parseFloat(n.getAttribute("data-product-price")),m=parseInt(n.getAttribute("data-product-installments")),p=n.getAttribute("data-product-currencyId"),g=n.getAttribute("data-product-currencyFormat"),f=n.getAttribute("data-product-isFreeShipping"),v=!1;if(t.length>0)for(var y=0;y<t.length;y++)o===t[y].id&&(v=!0,a=y);if(v){t[a].amount+=1;var b=t[a].amount*t[a].price;t[a].subtotal=parseFloat(b.toFixed(2))}else{var I={id:o,sku:r,title:i,description:s,availableSizes:l,size:d,style:c,price:u,installments:m,currencyId:p,currencyFormat:g,isFreeShipping:f,amount:1,subtotal:u};t.push(I)}setItemLocalStorage("carrinho",t),atualizarContantorItens()}})}();